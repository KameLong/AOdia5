<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="AOdia5.RouteEditPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:controls="clr-namespace:AOdia5"
    xmlns:inputLayout="clr-namespace:Syncfusion.Maui.Core;assembly=Syncfusion.Maui.Core"
    x:Name="page"
    Title="RouteEditPage">
    <Shell.BackButtonBehavior>
        <BackButtonBehavior IsVisible="False" />
    </Shell.BackButtonBehavior>
    <ScrollView>
        <VerticalStackLayout>
            <inputLayout:SfTextInputLayout
                Margin="30,5,30,0"
                ContainerType="Outlined"
                Hint="Route name">
                <controls:KameLongEntry
                    x:Name="nameEdit"
                    IsSpellCheckEnabled="false"
                    Text="{Binding routeName}" />
            </inputLayout:SfTextInputLayout>
            <inputLayout:SfTextInputLayout
                Margin="30,0,30,0"
                ContainerType="Outlined"
                FlexLayout.Grow="1"
                Hint="Route color">
                <controls:KameLongEntry x:Name="colorEdit" Text="{Binding routeColorStr}" />
            </inputLayout:SfTextInputLayout>
            <Rectangle
                BackgroundColor="{Binding routeColor}"
                HeightRequest="20"
                WidthRequest="40" />
            <Label Text="é§…ãƒªã‚¹ãƒˆ" />

            <VerticalStackLayout Margin="20,5,20,5" WidthRequest="200">
                <Button
                    Clicked="AddStation"
                    HorizontalOptions="Start"
                    Text="+" />
            </VerticalStackLayout>

            <CollectionView
                x:Name="stationList"
                Margin="20,5,20,5"
                ItemsSource="{Binding Paths}"
                SelectionMode="None">

                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <VerticalStackLayout WidthRequest="200">
                            <HorizontalStackLayout Margin="0,10,0,0">
                                <Label Text="{Binding startStation.Name}" WidthRequest="150" />
                                <Button
                                    Clicked="DeleteStation"
                                    Text="ðŸš®"
                                    WidthRequest="50" />
                            </HorizontalStackLayout>
                            <Button
                                Clicked="AddStation"
                                HorizontalOptions="Center"
                                Text="+" />
                        </VerticalStackLayout>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

            <VerticalStackLayout
                Margin="20,5,20,5"
                IsVisible="{Binding EndStationIsNotNull}"
                WidthRequest="200">
                <HorizontalStackLayout Margin="0,10,0,0">
                    <Label Text="{Binding endStation.Name}" WidthRequest="150" />
                    <Button
                        Clicked="DeleteEndStation"
                        Text="ðŸš®"
                        WidthRequest="50" />

                </HorizontalStackLayout>
                <Button
                    Clicked="Button_Clicked"
                    HorizontalOptions="Center"
                    Text="+" />
            </VerticalStackLayout>



        </VerticalStackLayout>
    </ScrollView>
</ContentPage>